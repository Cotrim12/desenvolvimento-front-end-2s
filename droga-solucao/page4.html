<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login - Droga Solução</title>
  <style>
    :root{--bg:#0f0f0f;--card:#121212;--green:#00b140}
    body{margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Arial;height:100vh;display:flex;align-items:center;justify-content:center}
    .card{background:var(--card);padding:24px;border-radius:12px;width:340px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
    h1{margin:0 0 6px;color:var(--green);font-size:20px}
    p.sub{margin:0 0 16px;color:#9aa29a;font-size:13px}
    label{display:block;font-size:13px;margin-top:8px;color:#cfe7d1}
    select,input{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:0;background:#1b1b1b;color:#fff}
    button{width:100%;padding:10px;margin-top:14px;border-radius:8px;border:0;background:var(--green);color:#000;font-weight:700;cursor:pointer}
    .links{display:flex;justify-content:space-between;margin-top:10px;font-size:13px;color:#9bdc7b}
    .links a{color:#9bdc7b;text-decoration:none}
    .note{font-size:12px;color:#9aa29a;margin-top:8px}
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="Login Droga Solução">
    <h1>Droga Solução</h1>
    <p class="sub">Escolha o tipo de conta e faça seu login</p>

    <label for="tipo">Tipo de login</label>
    <select id="tipo" aria-label="Tipo de login">
      <option value="cliente">Cliente (e-mail)</option>
      <option value="entregador">Entregador (e-mail)</option>
      <option value="funcionario">Funcionário (ID)</option>
      <option value="admin">Administrador (ID)</option>
    </select>

    <label id="lblInput" for="input">E-mail</label>
    <input id="input" type="text" placeholder="seu@exemplo.com" aria-label="E-mail ou ID">

    <button id="btn" type="button">Entrar</button>

    <div class="links">
      <a href="page7.html">Esqueci minha senha</a>
      <a href="page13.html">Entrar sem conta (cliente)</a>
    </div>

    <div class="note">IDs válidos (exemplo): Funcionário <code>FUNC001</code>, Administrador <code>ADMIN01</code>. Entregadores exemplo: <code>ent1@rota.com</code>.</div>
  </div>

<script>
  // listas de exemplo — altere para os IDs/emails reais
  const FUNCIONARIOS = ['FUNC001','FUNC002','FUNC003'];
  const ADMINISTRADORES = ['ADMIN01','ADMIN02'];
  const ENTREGADORES_EMAILS = ['ent1@rota.com','ent2@rota.com','motoboy@example.com'];

  const tipoEl = document.getElementById('tipo');
  const inputEl = document.getElementById('input');
  const lblInput = document.getElementById('lblInput');
  const btn = document.getElementById('btn');

  // Ao trocar tipo, atualiza placeholder/label
  tipoEl.addEventListener('change', () => {
    const tipo = tipoEl.value;
    if (tipo === 'cliente' || tipo === 'entregador') {
      lblInput.innerText = 'E-mail';
      inputEl.placeholder = 'seu@exemplo.com';
      inputEl.type = 'email';
    } else {
      // funcionario/admin -> ID
      lblInput.innerText = 'ID';
      inputEl.placeholder = 'Ex.: FUNC001';
      inputEl.type = 'text';
    }
    inputEl.value = '';
    inputEl.focus();
  });

  // Normaliza (remove espaços e torna uppercase para IDs)
  function normalizeId(v){ return String(v || '').trim().toUpperCase(); }
  function normalizeEmail(v){ return String(v || '').trim().toLowerCase(); }

  // salva user no localStorage para outras páginas usarem
  function saveUser(payload){ try{ localStorage.setItem('user', JSON.stringify(payload)); }catch(e){ console.warn('localStorage error', e); } }

  btn.addEventListener('click', () => {
    const tipo = tipoEl.value;
    const raw = inputEl.value.trim();

    if (!raw) { alert('Preencha o campo antes de entrar.'); inputEl.focus(); return; }

    if (tipo === 'cliente') {
      // login simplificado por e-mail (qualquer e-mail com @)
      const mail = normalizeEmail(raw);
      if (!mail.includes('@')) { alert('Digite um e-mail válido para cliente.'); inputEl.focus(); return; }
      saveUser({ role: 'cliente', email: mail });
      window.location.href = 'page13.html';
      return;
    }

    if (tipo === 'entregador') {
      // login por e-mail (checa lista)
      const mail = normalizeEmail(raw);
      if (!mail.includes('@')) { alert('Digite um e-mail válido para entregador.'); inputEl.focus(); return; }
      const allowed = ENTREGADORES_EMAILS.map(e => e.toLowerCase());
      if (allowed.includes(mail)) {
        saveUser({ role: 'entregador', email: mail });
        window.location.href = 'entregador.html';
      } else {
        alert('E-mail de entregador não reconhecido.');
      }
      return;
    }

    if (tipo === 'funcionario') {
      const id = normalizeId(raw);
      if (FUNCIONARIOS.map(x=>x.toUpperCase()).includes(id)) {
        saveUser({ role: 'funcionario', id });
        window.location.href = 'funcionario.html';
      } else {
        alert('ID de funcionário inválido.');
      }
      return;
    }

    if (tipo === 'admin') {
      const id = normalizeId(raw);
      if (ADMINISTRADORES.map(x=>x.toUpperCase()).includes(id)) {
        saveUser({ role: 'admin', id });
        window.location.href = 'admin.html';
      } else {
        alert('ID de administrador inválido.');
      }
      return;
    }
  });

  // inicializa placeholder correto ao abrir
  tipoEl.dispatchEvent(new Event('change'));
</script>
</body>
</html>
